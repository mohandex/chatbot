# ربات تلگرام برای نظارت بر پیام‌های تجاری ویرایش/حذف شده

این ربات با استفاده از کتابخانه [grammY](https://grammy.dev/) برای تلگرام ساخته شده است و به شما امکان می‌دهد تا زمانی که یک کاربر در چت تجاری با ربات شما پیامی را ویرایش یا حذف می‌کند، مطلع شوید.

## پیش‌نیازها

*   [Node.js](https://nodejs.org/) (نسخه 16 یا بالاتر توصیه می‌شود)
*   یک حساب کاربری تلگرام و یک توکن ربات از [@BotFather](https://t.me/BotFather)
*   فعال بودن قابلیت‌های تجاری برای ربات شما (از طریق @BotFather > `Edit Bot` > `Business`)

## راه‌اندازی

1.  **کلون کردن یا دانلود پروژه:**

    ```bash
    # اگر از git استفاده می‌کنید
    # git clone <repository_url>
    # cd <repository_name>
    ```
    در غیر این صورت، فایل‌ها را دانلود و در یک پوشه قرار دهید.

2.  **نصب وابستگی‌ها:**

    ```bash
    npm install
    ```

3.  **تنظیم متغیرهای محیطی:**

    فایل `.env.example` را به `.env` تغییر نام دهید و مقادیر زیر را در آن قرار دهید:

    *   `BOT_TOKEN`: توکن ربات تلگرام شما که از @BotFather دریافت کرده‌اید.
    *   `ADMIN_CHAT_ID`: شناسه عددی چت تلگرام شما (یا هر چتی که می‌خواهید اعلان‌ها به آن ارسال شود). برای پیدا کردن شناسه چت خود، می‌توانید به ربات [@userinfobot](https://t.me/userinfobot) پیام دهید و شناسه خود را از آنجا کپی کنید.

    محتوای فایل `.env` باید چیزی شبیه به این باشد:

    ```env
    BOT_TOKEN="123456:ABC-DEF1234ghIkl-zyx57W2v1u123ew11"
    ADMIN_CHAT_ID="123456789"
    ```

4.  **فعال کردن قابلیت‌های تجاری برای ربات:**

    *   به [@BotFather](https://t.me/BotFather) بروید.
    *   دستور `/mybots` را ارسال کنید و ربات خود را انتخاب کنید.
    *   روی دکمه `Bot Settings` کلیک کنید.
    *   روی `Business` کلیک کنید.
    *   مطمئن شوید که قابلیت `Business Chat History` (یا مشابه آن برای مشاهده پیام‌های ویرایش/حذف شده) فعال است. ممکن است نیاز باشد تنظیمات مربوط به `Business Messages` را نیز بررسی کنید تا ربات بتواند به پیام‌های تجاری دسترسی داشته باشد.

## اجرای ربات

برای شروع ربات، دستور زیر را در ترمینال اجرا کنید:

```bash
npm start
```

ربات اکنون در حال اجرا است و به محض ویرایش یا حذف یک پیام تجاری توسط کاربری که با ربات شما در ارتباط است، یک اعلان به `ADMIN_CHAT_ID` مشخص شده ارسال می‌کند.

## نحوه عملکرد

*   **ویرایش پیام:** وقتی یک پیام تجاری ویرایش می‌شود، ربات متن قبلی (در صورت وجود) و متن جدید را به همراه شناسه کاربر و اطلاعات چت به ادمین ارسال می‌کند.
*   **حذف پیام:** وقتی یک یا چند پیام تجاری حذف می‌شوند، ربات تعداد پیام‌های حذف شده و اطلاعات چت را به ادمین ارسال می‌کند. **توجه:** API تلگرام محتوای پیام‌های حذف شده را ارائه نمی‌دهد، بنابراین ربات نمی‌تواند متن پیام حذف شده را نمایش دهد.

## نکات مهم

*   **محرمانگی توکن:** توکن ربات خود را محرمانه نگه دارید و آن را در مکان‌های عمومی یا در کنترل نسخه به اشتراک نگذارید. استفاده از فایل `.env` برای این منظور توصیه می‌شود.
*   **شناسه چت ادمین:** مطمئن شوید که `ADMIN_CHAT_ID` صحیح است، در غیر این صورت اعلان‌ها را دریافت نخواهید کرد.
*   **قابلیت‌های تجاری تلگرام:** این ربات به قابلیت‌های تجاری تلگرام وابسته است. این قابلیت‌ها ممکن است در طول زمان توسط تلگرام تغییر کنند. برای اطلاعات بیشتر به [مستندات رسمی API ربات تلگرام](https://core.telegram.org/bots/api#business) مراجعه کنید.
*   **محدودیت‌های API:** به محدودیت‌های API تلگرام توجه داشته باشید تا از مسدود شدن ربات خود جلوگیری کنید.

## توسعه بیشتر

*   می‌توانید ربات را برای ذخیره پیام‌ها در یک پایگاه داده گسترش دهید.
*   می‌توانید قابلیت‌های بیشتری مانند پاسخ خودکار یا مدیریت کاربران تجاری اضافه کنید.